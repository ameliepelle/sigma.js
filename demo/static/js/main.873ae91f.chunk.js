(this["webpackJsonpsigma-demo"]=this["webpackJsonpsigma-demo"]||[]).push([[0],{42:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(34),s=n.n(r),i=(n(42),n(14)),o=n(3),l=n(5),u=n(6),b=n(35),j=n.n(b),d=n(4),h="#000000";function f(e,t,n){if(t.label){var c=n.labelSize,a=n.labelFont,r=n.labelWeight;e.font="".concat(r," ").concat(c,"px ").concat(a);var s=e.measureText(t.label).width+8;e.fillStyle="#ffffffcc",e.fillRect(t.x+t.size,t.y+c/3-15,s,20),e.fillStyle="#000",e.fillText(t.label,t.x+t.size+3,t.y+c/3)}}var O=function(e,t){var n=Object(c.useState)(e),a=Object(l.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var n=setTimeout((function(){e!==r&&s(e)}),t);return function(){clearTimeout(n)}}),[e,t]),r},m=n(1),g=function(e){var t=e.children,n=e.hoveredNode,a=Object(u.useSigma)(),r=a.getGraph(),s=O(n,40);return Object(c.useEffect)((function(){a.setSetting("hoverRenderer",(function(e,t,n){return function(e,t,n){var c=n.labelSize,a=n.labelFont,r=n.labelWeight,s=c-2,i=t.label,o="unknown"!==t.tag?t.tag:"",l=t.clusterLabel;e.beginPath(),e.fillStyle="#fff",e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowBlur=8,e.shadowColor="#000",e.font="".concat(r," ").concat(c,"px ").concat(a);var u=e.measureText(i).width;e.font="".concat(r," ").concat(s,"px ").concat(a);var b=o?e.measureText(o).width:0;e.font="".concat(r," ").concat(s,"px ").concat(a);var j=l?e.measureText(l).width:0,d=Math.max(u,b,j),f=Math.round(t.x),O=Math.round(t.y),m=Math.round(d+c/2+t.size+3),g=Math.round(c/2+4),x=o?Math.round(s/2+9):0;!function(e,t,n,c,a,r){e.beginPath(),e.moveTo(t+r,n),e.lineTo(t+c-r,n),e.quadraticCurveTo(t+c,n,t+c,n+r),e.lineTo(t+c,n+a-r),e.quadraticCurveTo(t+c,n+a,t+c-r,n+a),e.lineTo(t+r,n+a),e.quadraticCurveTo(t,n+a,t,n+a-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath()}(e,f,O-x-12,m,Math.round(s/2+9)+g+x+12,5),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.fillStyle=h,e.font="".concat(r," ").concat(c,"px ").concat(a),e.fillText(i,t.x+t.size+3,t.y+c/3),o&&(e.fillStyle=h,e.font="".concat(r," ").concat(s,"px ").concat(a),e.fillText(o,t.x+t.size+3,t.y-2*c/3-2)),e.fillStyle=t.color,e.font="".concat(r," ").concat(s,"px ").concat(a),e.fillText(l,t.x+t.size+3,t.y+c/3+3+s)}(e,Object(o.a)(Object(o.a)({},a.getNodeDisplayData(t.key)),t),n)}))}),[a,r]),Object(c.useEffect)((function(){var e=s?a.getNodeDisplayData(s).color:"";a.setSetting("nodeReducer",s?function(e,t){return e===s||r.hasEdge(e,s)||r.hasEdge(s,e)?Object(o.a)(Object(o.a)({},t),{},{zIndex:1}):Object(o.a)(Object(o.a)({},t),{},{zIndex:0,label:"",color:"#bbb",image:null,highlighted:!1})}:null),a.setSetting("edgeReducer",s?function(t,n){return r.hasExtremity(t,s)?Object(o.a)(Object(o.a)({},n),{},{color:e,size:4}):Object(o.a)(Object(o.a)({},n),{},{color:"#eee",hidden:!0})}:null)}),[s]),Object(m.jsx)(m.Fragment,{children:t})};function x(){return document.querySelector(".sigma-mouse")}var p=function(e){var t=e.setHoveredNode,n=e.children,a=Object(u.useSigma)().getGraph(),r=Object(u.useRegisterEvents)();return Object(c.useEffect)((function(){r({clickNode:function(e){var t=e.node;a.getNodeAttribute(t,"hidden")||window.open(a.getNodeAttribute(t,"URL"),"_blank")},enterNode:function(e){var n=e.node;t(n);var c=x();c&&c.classList.add("mouse-pointer")},leaveNode:function(){t(null);var e=x();e&&e.classList.remove("mouse-pointer")}})}),[]),Object(m.jsx)(m.Fragment,{children:n})},y=n(10),k=function(e){var t=e.dataset,n=e.filters,a=e.children,r=Object(u.useSigma)().getGraph();return Object(c.useEffect)((function(){if(r&&t){var e=Object(d.keyBy)(t.clusters,"key"),n=Object(d.keyBy)(t.tags,"key");t.nodes.forEach((function(t){return r.addNode(t.key,Object(o.a)(Object(o.a)(Object(o.a)({},t),Object(d.omit)(e[t.cluster],"key")),{},{image:"".concat("/demo","/images/").concat(n[t.tag].image)}))})),t.edges.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],c=t[1];return r.addEdge(n,c,{size:1})}));var c=r.nodes().map((function(e){return r.getNodeAttribute(e,"score")})),a=Math.min.apply(Math,Object(y.a)(c)),s=Math.max.apply(Math,Object(y.a)(c));return r.forEachNode((function(e){return r.setNodeAttribute(e,"size",(r.getNodeAttribute(e,"score")-a)/(s-a)*27+3)})),function(){return r.clear()}}}),[r,t]),Object(c.useEffect)((function(){var e=n.clusters,t=n.tags;r.forEachNode((function(n,c){var a=c.cluster,s=c.tag;return r.setNodeAttribute(n,"hidden",!e[a]||!t[s])}))}),[r,n]),Object(m.jsx)(m.Fragment,{children:a})},v=n(8);var N=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useRef)(null);return Object(c.useEffect)((function(){return document.onfullscreenchange=function(){a(!n)},function(){document.onfullscreenchange=null}}),[n]),document.fullscreenEnabled?Object(m.jsx)("button",{ref:r,type:"button",className:"ico",onClick:function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},title:"Toggle fullscreen",children:n?Object(m.jsx)(v.b,{}):Object(m.jsx)(v.a,{})}):null},w=n(9),S=n(36),E=n.n(S),C=function(e){var t=e.title,n=e.initiallyDeployed,a=e.children,r=Object(c.useState)(n||!1),s=Object(l.a)(r,2),i=s[0],o=s[1],u=Object(c.useRef)(null);return Object(c.useEffect)((function(){i&&setTimeout((function(){u.current&&u.current.parentElement.scrollTo({top:u.current.offsetTop-5,behavior:"smooth"})}),300)}),[i]),Object(m.jsxs)("div",{className:"panel",ref:u,children:[Object(m.jsxs)("h2",{children:[t," ",Object(m.jsx)("button",{type:"button",onClick:function(){return o((function(e){return!e}))},children:i?Object(m.jsx)(w.b,{}):Object(m.jsx)(w.c,{})})]}),Object(m.jsx)(E.a,{duration:300,height:i?"auto":0,children:a})]})},T=function(){return Object(m.jsxs)(C,{initiallyDeployed:!0,title:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(v.c,{className:"text-muted"})," Description"]}),children:[Object(m.jsxs)("p",{children:["This map represents a ",Object(m.jsx)("i",{children:"network"}),' of Wikipedia articles around the topic of "Data vizualisation". Each'," ",Object(m.jsx)("i",{children:"node"})," represents an article, and each edge a"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/See_also",children:'"See also" link'}),"."]}),Object(m.jsxs)("p",{children:["The seed articles were selected by hand by the"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://medialab.sciencespo.fr/",children:"Sciences-Po m\xe9dialab"})," ","team, and the network was crawled using"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://densitydesign.github.io/strumentalia-seealsology/",children:"Seealsology"}),", and then cleaned and enriched manually. This makes the dataset creditable to both the m\xe9dialab team and"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/Wikipedia:Wikipedians",children:"Wikipedia editors"}),"."]}),Object(m.jsxs)("p",{children:["This web application has been developed by"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.ouestware.com/en/",children:"OuestWare"}),", using"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://reactjs.org/",children:"react"})," ","and"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.sigmajs.org",children:"sigma.js"}),". You can read the source code"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/jacomyal/sigma.js/tree/main/demo",children:"on GitHub"}),"."]}),Object(m.jsxs)("p",{children:["Nodes sizes are related to their"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/Betweenness_centrality",children:"betweenness centrality"}),". More central nodes (ie. bigger nodes) are important crossing points in the network. Finally, You can click a node to open the related Wikipedia article."]})]})},M=n(93),z=function(e){var t=e.clusters,n=e.filters,a=e.toggleCluster,r=e.setClusters,s=Object(u.useSigma)().getGraph(),i=Object(c.useMemo)((function(){var e={};return s.forEachNode((function(t,n){var c=n.cluster;return e[c]=(e[c]||0)+1})),e}),[]),o=Object(c.useMemo)((function(){return Math.max.apply(Math,Object(y.a)(Object(d.values)(i)))}),[i]),b=Object(c.useMemo)((function(){return Object.keys(n.clusters).length}),[n]),j=Object(c.useState)(i),h=Object(l.a)(j,2),f=h[0],O=h[1];Object(c.useEffect)((function(){requestAnimationFrame((function(){var e={};s.forEachNode((function(t,n){var c=n.cluster;return!n.hidden&&(e[c]=(e[c]||0)+1)})),O(e)}))}),[n]);var g=Object(c.useMemo)((function(){return Object(d.sortBy)(t,(function(e){return-i[e.key]}))}),[t,i]);return Object(m.jsxs)(C,{title:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w.d,{className:"text-muted"})," Clusters",b<t.length?Object(m.jsxs)("span",{className:"text-muted text-small",children:[" ","(",b," / ",t.length,")"]}):""]}),children:[Object(m.jsx)("p",{children:Object(m.jsx)("i",{className:"text-muted",children:"Click a cluster to show/hide related pages from the network."})}),Object(m.jsxs)("p",{className:"buttons",children:[Object(m.jsxs)("button",{className:"btn",onClick:function(){return r(Object(d.mapValues)(Object(d.keyBy)(t,"key"),(function(){return!0})))},children:[Object(m.jsx)(M.a,{})," Check all"]})," ",Object(m.jsxs)("button",{className:"btn",onClick:function(){return r({})},children:[Object(m.jsx)(M.b,{})," Uncheck all"]})]}),Object(m.jsx)("ul",{children:g.map((function(e){var t=i[e.key],c=f[e.key]||0;return Object(m.jsxs)("li",{className:"caption-row",title:"".concat(t," page").concat(t>1?"s":"").concat(c!==t?" (only ".concat(c," visible)"):""),children:[Object(m.jsx)("input",{type:"checkbox",checked:n.clusters[e.key]||!1,onChange:function(){return a(e.key)},id:"cluster-".concat(e.key)}),Object(m.jsxs)("label",{htmlFor:"cluster-".concat(e.key),children:[Object(m.jsx)("span",{className:"circle",style:{background:e.color,borderColor:e.color}})," ",Object(m.jsxs)("div",{className:"node-label",children:[Object(m.jsx)("span",{children:e.clusterLabel}),Object(m.jsx)("div",{className:"bar",style:{width:100*t/o+"%"},children:Object(m.jsx)("div",{className:"inside-bar",style:{width:100*c/t+"%"}})})]})]})]},e.key)}))})]})},F=function(e){var t=e.filters,n=Object(u.useSigma)(),a=Object(c.useState)(""),r=Object(l.a)(a,2),s=r[0],i=r[1],b=Object(c.useState)([]),j=Object(l.a)(b,2),d=j[0],h=j[1],f=Object(c.useState)(null),O=Object(l.a)(f,2),g=O[0],x=O[1],p=function(){var e=[],t=s.toLowerCase();!g&&s.length>1&&n.getGraph().forEachNode((function(n,c){!c.hidden&&c.label&&0===c.label.toLowerCase().indexOf(t)&&e.push({id:n,label:c.label})})),h(e)};Object(c.useEffect)((function(){return p()}),[s]),Object(c.useEffect)((function(){requestAnimationFrame(p)}),[t]),Object(c.useEffect)((function(){if(g){n.getGraph().setNodeAttribute(g,"highlighted",!0);var e=n.getNodeDisplayData(g);return e&&n.getCamera().animate(Object(o.a)(Object(o.a)({},e),{},{ratio:.05}),{duration:600}),function(){n.getGraph().setNodeAttribute(g,"highlighted",!1)}}}),[g]);return Object(m.jsxs)("div",{className:"search-wrapper",children:[Object(m.jsx)("input",{type:"search",placeholder:"Search in nodes...",list:"nodes",value:s,onChange:function(e){var t=e.target.value,n=d.find((function(e){return e.label===t}));n?(i(n.label),h([]),x(n.id)):(x(null),i(t))},onKeyPress:function(e){"Enter"===e.key&&d.length&&(i(d[0].label),x(d[0].id))}}),Object(m.jsx)(v.d,{className:"icon"}),Object(m.jsx)("datalist",{id:"nodes",children:d.map((function(e){return Object(m.jsx)("option",{value:e.label,children:e.label},e.id)}))})]})},A=n(18),B=function(){var e=Object(u.useSigma)();function t(t){e&&(t?t>0?e.getCamera().animatedZoom({duration:200,factor:1.5}):t<0&&e.getCamera().animatedUnzoom({duration:200,factor:1.5}):e.getCamera().animatedReset({duration:200}))}return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{type:"button",className:"ico",onClick:function(){return t(1)},title:"Zoom In",children:Object(m.jsx)(v.e,{})}),Object(m.jsx)("button",{type:"button",className:"ico",onClick:function(){return t(-1)},title:"Zoom Out",children:Object(m.jsx)(v.f,{})}),Object(m.jsx)("button",{type:"button",className:"ico",onClick:function(){return t()},title:"See whole graph",children:Object(m.jsx)(A.b,{})})]})};function _(e){return(100*e).toFixed(1)+"%"}var q=function(e){var t=e.filters,n=Object(u.useSigma)().getGraph(),a=Object(c.useState)({nodes:0,edges:0}),r=Object(l.a)(a,2),s=r[0],i=r[1];return Object(c.useEffect)((function(){requestAnimationFrame((function(){var e={nodes:0,edges:0};n.forEachNode((function(t,n){return!n.hidden&&e.nodes++})),n.forEachEdge((function(t,n,c,a,r,s){return!r.hidden&&!s.hidden&&e.edges++})),i(e)}))}),[t]),Object(m.jsxs)("div",{className:"graph-title",children:[Object(m.jsx)("h1",{children:"A cartography of Wikipedia pages around data visualization"}),Object(m.jsx)("h2",{children:Object(m.jsxs)("i",{children:[n.order," node",n.order>1?"s":""," ",s.nodes!==n.order?" (only ".concat(_(s.nodes/n.order)," visible)"):"",", ",n.size," edge",n.size>1?"s":""," ",s.edges!==n.size?" (only ".concat(_(s.edges/n.size)," visible)"):""]})})]})},D=function(e){var t=e.tags,n=e.filters,a=e.toggleTag,r=e.setTags,s=Object(u.useSigma)().getGraph(),i=Object(c.useMemo)((function(){var e={};return s.forEachNode((function(t,n){var c=n.tag;return e[c]=(e[c]||0)+1})),e}),[]),o=Object(c.useMemo)((function(){return Math.max.apply(Math,Object(y.a)(Object(d.values)(i)))}),[i]),b=Object(c.useMemo)((function(){return Object.keys(n.tags).length}),[n]),j=Object(c.useState)(i),h=Object(l.a)(j,2),f=h[0],O=h[1];Object(c.useEffect)((function(){requestAnimationFrame((function(){var e={};s.forEachNode((function(t,n){var c=n.tag;return!n.hidden&&(e[c]=(e[c]||0)+1)})),O(e)}))}),[n]);var g=Object(c.useMemo)((function(){return Object(d.sortBy)(t,(function(e){return"unknown"===e.key?1/0:-i[e.key]}))}),[t,i]);return Object(m.jsxs)(C,{title:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(w.a,{className:"text-muted"})," Categories",b<t.length?Object(m.jsxs)("span",{className:"text-muted text-small",children:[" ","(",b," / ",t.length,")"]}):""]}),children:[Object(m.jsx)("p",{children:Object(m.jsx)("i",{className:"text-muted",children:"Click a category to show/hide related pages from the network."})}),Object(m.jsxs)("p",{className:"buttons",children:[Object(m.jsxs)("button",{className:"btn",onClick:function(){return r(Object(d.mapValues)(Object(d.keyBy)(t,"key"),(function(){return!0})))},children:[Object(m.jsx)(M.a,{})," Check all"]})," ",Object(m.jsxs)("button",{className:"btn",onClick:function(){return r({})},children:[Object(m.jsx)(M.b,{})," Uncheck all"]})]}),Object(m.jsx)("ul",{children:g.map((function(e){var t=i[e.key],c=f[e.key]||0;return Object(m.jsxs)("li",{className:"caption-row",title:"".concat(t," page").concat(t>1?"s":"").concat(c!==t?" (only ".concat(c," visible)"):""),children:[Object(m.jsx)("input",{type:"checkbox",checked:n.tags[e.key]||!1,onChange:function(){return a(e.key)},id:"tag-".concat(e.key)}),Object(m.jsxs)("label",{htmlFor:"tag-".concat(e.key),children:[Object(m.jsx)("span",{className:"circle",style:{backgroundImage:"url(".concat("/demo","/images/").concat(e.image,")")}})," ",Object(m.jsxs)("div",{className:"node-label",children:[Object(m.jsx)("span",{children:e.key}),Object(m.jsx)("div",{className:"bar",style:{width:100*t/o+"%"},children:Object(m.jsx)("div",{className:"inside-bar",style:{width:100*c/t+"%"}})})]})]})]},e.key)}))})]})},G=(n(91),n(37)),R=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(l.a)(r,2),b=s[0],h=s[1],O=Object(c.useState)(null),x=Object(l.a)(O,2),y=x[0],v=x[1],w=Object(c.useState)({clusters:{},tags:{}}),S=Object(l.a)(w,2),E=S[0],C=S[1],M=Object(c.useState)(null),_=Object(l.a)(M,2),R=_[0],W=_[1];return Object(c.useEffect)((function(){fetch("".concat("/demo","/dataset.json")).then((function(e){return e.json()})).then((function(e){v(e),C({clusters:Object(d.mapValues)(Object(d.keyBy)(e.clusters,"key"),Object(d.constant)(!0)),tags:Object(d.mapValues)(Object(d.keyBy)(e.tags,"key"),Object(d.constant)(!0))}),requestAnimationFrame((function(){return h(!0)}))}))}),[]),y?Object(m.jsx)("div",{id:"app-root",className:n?"show-contents":"",children:Object(m.jsxs)(u.SigmaContainer,{graphOptions:{type:"directed"},initialSettings:{nodeProgramClasses:{image:j()()},labelRenderer:f,defaultNodeType:"image",defaultEdgeType:"arrow",labelDensity:.07,labelGridCellSize:60,labelRenderedSizeThreshold:15,labelFont:"Lato, sans-serif",zIndex:!0},className:"react-sigma",children:[Object(m.jsx)(g,{hoveredNode:R}),Object(m.jsx)(p,{setHoveredNode:W}),Object(m.jsx)(k,{dataset:y,filters:E}),b&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"controls",children:[Object(m.jsx)("button",{type:"button",className:"ico show-contents",onClick:function(){return a(!0)},title:"Show caption and description",children:Object(m.jsx)(A.a,{})}),Object(m.jsx)(N,{}),Object(m.jsx)(B,{})]}),Object(m.jsxs)("div",{className:"contents",children:[Object(m.jsx)("button",{type:"button",className:"ico hide-contents",onClick:function(){return a(!1)},title:"Show caption and description",children:Object(m.jsx)(G.a,{})}),Object(m.jsx)(q,{filters:E}),Object(m.jsxs)("div",{className:"panels",children:[Object(m.jsx)(F,{filters:E}),Object(m.jsx)(T,{}),Object(m.jsx)(z,{clusters:y.clusters,filters:E,setClusters:function(e){return C((function(t){return Object(o.a)(Object(o.a)({},t),{},{clusters:e})}))},toggleCluster:function(e){C((function(t){return Object(o.a)(Object(o.a)({},t),{},{clusters:t.clusters[e]?Object(d.omit)(t.clusters,e):Object(o.a)(Object(o.a)({},t.clusters),{},Object(i.a)({},e,!0))})}))}}),Object(m.jsx)(D,{tags:y.tags,filters:E,setTags:function(e){return C((function(t){return Object(o.a)(Object(o.a)({},t),{},{tags:e})}))},toggleTag:function(e){C((function(t){return Object(o.a)(Object(o.a)({},t),{},{tags:t.tags[e]?Object(d.omit)(t.tags,e):Object(o.a)(Object(o.a)({},t.tags),{},Object(i.a)({},e,!0))})}))}})]})]})]})]})}):null};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(R,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.873ae91f.chunk.js.map